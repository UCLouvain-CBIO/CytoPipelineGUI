<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CytoPipelineGUI : visualization of Flow Cytometry Data Analysis Pipelines run with CytoPipeline • CytoPipelineGUI</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="CytoPipelineGUI : visualization of Flow Cytometry Data Analysis Pipelines run with CytoPipeline">
<meta property="og:description" content="CytoPipelineGUI">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CytoPipelineGUI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/CytoPipelineGUI.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Demo.html">Demonstration of the CytoPipeline R package suite functionalities</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/UCLouvain-CBIO/CytoPipelineGUI/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>CytoPipelineGUI : visualization of Flow
Cytometry Data Analysis Pipelines run with CytoPipeline</h1>
                        <h4 data-toc-skip class="author">Philippe
Hauchamps</h4>
                                    <h4 data-toc-skip class="author">Laurent
Gatto</h4>
                        
      
      <small class="dont-index">Source: <a href="https://github.com/UCLouvain-CBIO/CytoPipelineGUI/blob/HEAD/vignettes/CytoPipelineGUI.Rmd" class="external-link"><code>vignettes/CytoPipelineGUI.Rmd</code></a></small>
      <div class="hidden name"><code>CytoPipelineGUI.Rmd</code></div>

    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      <p>This vignette gives a short introduction to CytoPipelineGUI,
      which is the companion package of CytoPipeline for interactive
      visualization of flow cytometry data pre-processing pipeline
      results. This vignette is distributed under a CC BY-SA
      license.</p>
    </div>
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install this package, start R and enter (uncommented):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if (!require("BiocManager", quietly = TRUE))</span></span>
<span><span class="co">#     install.packages("BiocManager")</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># BiocManager::install("CytoPipelineGUI")</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="foreword---preparation-of-pipeline-results-to-be-visualized">Foreword - Preparation of pipeline results to be visualized<a class="anchor" aria-label="anchor" href="#foreword---preparation-of-pipeline-results-to-be-visualized"></a>
</h2>
<p><code>CytoPipelineGUI</code> is the companion package of
<code>CytoPipeline</code>, and is used for interactive visualization of
flow cytometry data pre-processing pipeline results. It implements two
shiny applications :</p>
<ul>
<li><p>a shiny app for interactive comparison of flow frames that are
the results of CytoProcessingSteps of the same or different CytoPipeline
experiments.<br>
It is launched using the following statement:
<code><a href="../reference/CytoPipelineCheckApp.html">CytoPipelineCheckApp()</a></code> (see below);</p></li>
<li><p>a shiny app for interactive visualization and manual adjustments
of scale transformation objects. It is launched using the following
statement: <code><a href="../reference/ScaleTransformApp.html">ScaleTransformApp()</a></code> (see below).</p></li>
</ul>
<p>In order to be able to show <code>CytoPipelineGUI</code> in action,
as a pre-requisite we need to have created a <code>CytoPipeline</code>
object, defined the different pipeline steps, and run the pipeline until
completion, so that all intermediate results can be found on a cache.
These preliminary steps are performed by the preparation code below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># raw data</span></span>
<span><span class="va">rawDataDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"CytoPipeline"</span><span class="op">)</span></span>
<span><span class="va">sampleFiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">rawDataDir</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">rawDataDir</span>,</span>
<span>                                                pattern <span class="op">=</span> <span class="st">"Donor"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># output files</span></span>
<span><span class="va">workDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># pipeline configuration files (in json)</span></span>
<span><span class="va">jsonDir</span> <span class="op">&lt;-</span> <span class="va">rawDataDir</span></span>
<span></span>
<span><span class="co"># creation of CytoPipeline objects</span></span>
<span></span>
<span><span class="va">pipL_PeacoQC</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">CytoPipeline</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">jsonDir</span>, <span class="st">"OMIP021_PeacoQC_pipeline.json"</span><span class="op">)</span>,</span>
<span>               experimentName <span class="op">=</span> <span class="st">"OMIP021_PeacoQC"</span>,</span>
<span>               sampleFiles <span class="op">=</span> <span class="va">sampleFiles</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pipL_flowAI</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">CytoPipeline</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">jsonDir</span>, <span class="st">"OMIP021_flowAI_pipeline.json"</span><span class="op">)</span>,</span>
<span>               experimentName <span class="op">=</span> <span class="st">"OMIP021_flowAI"</span>,</span>
<span>               sampleFiles <span class="op">=</span> <span class="va">sampleFiles</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># execute PeacoQC pipeline</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu">execute</span><span class="op">(</span><span class="va">pipL_PeacoQC</span>, rmCache <span class="op">=</span> <span class="cn">TRUE</span>, path <span class="op">=</span> <span class="va">workDir</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># execute flowAI pipeline</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu">execute</span><span class="op">(</span><span class="va">pipL_flowAI</span>, rmCache <span class="op">=</span> <span class="cn">TRUE</span>, path <span class="op">=</span> <span class="va">workDir</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Quality control for the file: Donor1</span></span>
<span><span class="co">## 3.18% of anomalous cells detected in the flow rate check. </span></span>
<span><span class="co">## 0% of anomalous cells detected in signal acquisition check. </span></span>
<span><span class="co">## 0.12% of anomalous cells detected in the dynamic range check. </span></span>
<span><span class="co">## Quality control for the file: Donor2</span></span>
<span><span class="co">## 4.52% of anomalous cells detected in the flow rate check. </span></span>
<span><span class="co">## 0% of anomalous cells detected in signal acquisition check. </span></span>
<span><span class="co">## 0.1% of anomalous cells detected in the dynamic range check.</span></span></code></pre>
<p>If you are unfamiliar with <code>CytoPipeline</code> package, and you
would like to know more about these steps, it is advised that you read
the <code>CytoPipeline</code> vignette, and/or that you watch the videos
illustrating the <code>CytoPipeline</code> suite, which are accessible
through links included in the <code>Demo.Rmd</code> vignette.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The visualization tools shown here are demonstrated on the results of
two different previously run <code>CytoPipeline</code> objects. These
flow cytometry pre-processing pipeline are described in details in the
<code>CytoPipeline</code> vignette. Here below is a short summary of the
illustrating dataset, as well as the pipeline steps.</p>
<div class="section level3">
<h3 id="example-dataset-more-details-in-cytopipeline-vignette">Example dataset (more details in CytoPipeline vignette)<a class="anchor" aria-label="anchor" href="#example-dataset-more-details-in-cytopipeline-vignette"></a>
</h3>
<p>The example dataset that will be used throughout this vignette is
derived from a reference public dataset accompanying the OMIP-021
(Optimized Multicolor Immunofluorescence Panel 021) article <span class="citation">(Gherardin et al. 2014)</span>.</p>
<p>A sub-sample of this public dataset is built-in in the
<code>CytoPipeline</code> package, as the OMIP021 dataset. See the
<code>MakeOMIP021Samples.R</code> script for more details on how the
<code>OMIP021</code> dataset was created. This script is to be found in
the <code>script</code> subdirectory in the <code>CytoPipeline</code>
package installation path.</p>
</div>
<div class="section level3">
<h3 id="example-of-pre-processing-and-qc-pipelines-more-details-in-cytopipeline-vignette">Example of pre-processing and QC pipelines (more details in
CytoPipeline vignette)<a class="anchor" aria-label="anchor" href="#example-of-pre-processing-and-qc-pipelines-more-details-in-cytopipeline-vignette"></a>
</h3>
<p>In our example pipeline, we assumed that we wanted to pre-process the
two samples of the <code>OMIP021</code> dataset, and that we wanted to
compare what we would obtain when pre-processing these files using two
different QC methods.</p>
<p>In the first pre-processing pipeline, we used the <code>flowAI</code>
QC method <span class="citation">(Monaco et al. 2016)</span>, while in
the second pipeline, we used the <code>PeacoQC</code> method <span class="citation">(Emmaneel et al. 2021)</span>.</p>
<p>In both pipelines, the first part consisted in estimating appropriate
scale transformation functions for all channels present in the sample
<code>flowFrame</code>. For this, we ran the following steps (Fig.
1):</p>
<ul>
<li>reading the two samples <code>.fcs</code> files</li>
<li>removing the margin events from each file</li>
<li>applying compensation for each file</li>
<li>aggregating and sub-sampling from each file</li>
<li>estimating the scale transformations from the aggregated and
sub-sampled data</li>
</ul>
<div class="figure" style="text-align: center">
<img src="figs/scaleTransformQueue.png" alt="Scale transform processing queue" width="75%"><p class="caption">
Scale transform processing queue
</p>
</div>
<p>After this first part, pre-processing for each file, one by one, was
performed.<br>
However, depending on the choice of QC method, the order of steps needed
to be slightly different (see Fig. 2) :</p>
<div class="figure" style="text-align: center">
<img src="figs/preProcessingQueues.png" alt="Pre-processing queue for two different pipeline settings" width="100%"><p class="caption">
Pre-processing queue for two different pipeline settings
</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="interactive-visualizations">Interactive visualizations<a class="anchor" aria-label="anchor" href="#interactive-visualizations"></a>
</h2>
<div class="section level3">
<h3 id="visualizing-pipeline-runs-at-different-steps">Visualizing pipeline runs at different steps<a class="anchor" aria-label="anchor" href="#visualizing-pipeline-runs-at-different-steps"></a>
</h3>
<p>Using the <code>CytoPipelineGUI</code> package, it is possible to
interactively inspect intermediate results produced during the pipeline
execution.</p>
<p>This is done through the <code>CytoPipelineCheckApp</code>, which can
provide a view of the data structure, i.e. the <code>flowFrame</code>,
at any step of any pipeline, as well as a comparison between any the
pair of <code>flowFrame</code> state.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">CytoPipelineGUI</span><span class="fu">::</span><span class="fu"><a href="../reference/CytoPipelineCheckApp.html">CytoPipelineCheckApp</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="va">workDir</span><span class="op">)</span>    </span>
<span><span class="op">}</span></span></code></pre></div>
<p>It is difficult to extensively demonstrate specific user interactions
in a vignette, therefore live demo videos can be found from the
<code>Demo.Rmd</code> vignette.</p>
<p>However, it is possible to mimic the call to some of the shiny
application features, by using some specific
<code>CytoPipelineGUI</code> exported functions.</p>
<p>A first example below is a function call which retrieves the visuals
of the workflow of a previously run pipeline:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pre-processing workflow</span></span>
<span><span class="va">expName</span> <span class="op">&lt;-</span> <span class="st">"OMIP021_PeacoQC"</span></span>
<span><span class="fu">CytoPipelineGUI</span><span class="fu">::</span><span class="fu"><a href="../reference/plotSelectedWorkflow.html">plotSelectedWorkflow</a></span><span class="op">(</span></span>
<span>            experimentName <span class="op">=</span> <span class="va">expName</span>,</span>
<span>            whichQueue <span class="op">=</span> <span class="st">"pre-processing"</span>,</span>
<span>            sampleFile <span class="op">=</span> <span class="va">sampleFiles</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>            path <span class="op">=</span> <span class="va">workDir</span><span class="op">)</span></span></code></pre></div>
<p><img src="CytoPipelineGUI_files/figure-html/workflow_viz_prog-1.png" width="600" height="450" style="display: block; margin: auto;"></p>
<p>It is also possible to programmatically obtain comparison plots that
are displayed within the shiny application.<br>
Here below is an example, where one is comparing the two pipelines
(<em>PeacoQC</em> vs <em>flowAI</em>) after the QC step:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expName1</span> <span class="op">&lt;-</span> <span class="st">"OMIP021_PeacoQC"</span></span>
<span><span class="va">expName2</span> <span class="op">&lt;-</span> <span class="st">"OMIP021_flowAI"</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">CytoPipelineGUI</span><span class="fu">::</span><span class="fu"><a href="../reference/plotSelectedFlowFrame.html">plotSelectedFlowFrame</a></span><span class="op">(</span></span>
<span>    experimentName <span class="op">=</span> <span class="va">expName1</span>,</span>
<span>    whichQueue <span class="op">=</span> <span class="st">"pre-processing"</span>,</span>
<span>    sampleFile <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    flowFrameName <span class="op">=</span> <span class="st">"perform_QC_obj"</span>,</span>
<span>    path <span class="op">=</span> <span class="va">workDir</span>,</span>
<span>    xChannelLabel <span class="op">=</span> <span class="st">"Time : NA"</span>,</span>
<span>    yChannelLabel <span class="op">=</span> <span class="st">"FSC-A : NA"</span>,</span>
<span>    useAllCells <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    useFixedLinearRange <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">CytoPipelineGUI</span><span class="fu">::</span><span class="fu"><a href="../reference/plotSelectedFlowFrame.html">plotSelectedFlowFrame</a></span><span class="op">(</span></span>
<span>    experimentName <span class="op">=</span> <span class="va">expName2</span>,</span>
<span>    whichQueue <span class="op">=</span> <span class="st">"pre-processing"</span>,</span>
<span>    sampleFile <span class="op">=</span> <span class="fl">2</span>, </span>
<span>    flowFrameName <span class="op">=</span> <span class="st">"perform_QC_obj"</span>,</span>
<span>    path <span class="op">=</span> <span class="va">workDir</span>,</span>
<span>    xChannelLabel <span class="op">=</span> <span class="st">"Time : NA"</span>,</span>
<span>    yChannelLabel <span class="op">=</span> <span class="st">"FSC-A : NA"</span>,</span>
<span>    useAllCells <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    useFixedLinearRange <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">CytoPipelineGUI</span><span class="fu">::</span><span class="fu"><a href="../reference/plotDiffFlowFrame.html">plotDiffFlowFrame</a></span><span class="op">(</span></span>
<span>    path <span class="op">=</span> <span class="va">workDir</span>,</span>
<span>    experimentNameFrom <span class="op">=</span> <span class="va">expName1</span>,</span>
<span>    whichQueueFrom <span class="op">=</span> <span class="st">"pre-processing"</span>,</span>
<span>    sampleFileFrom <span class="op">=</span> <span class="fl">2</span>, </span>
<span>    flowFrameNameFrom <span class="op">=</span> <span class="st">"perform_QC_obj"</span>,</span>
<span>    xChannelLabelFrom <span class="op">=</span> <span class="st">"Time : NA"</span>,</span>
<span>    yChannelLabelFrom <span class="op">=</span> <span class="st">"FSC-A : NA"</span>,</span>
<span>    experimentNameTo <span class="op">=</span> <span class="va">expName2</span>,</span>
<span>    whichQueueTo <span class="op">=</span> <span class="st">"pre-processing"</span>,</span>
<span>    sampleFileTo <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    flowFrameNameTo <span class="op">=</span> <span class="st">"perform_QC_obj"</span>,</span>
<span>    xChannelLabelTo <span class="op">=</span> <span class="st">"Time : NA"</span>,</span>
<span>    yChannelLabelTo <span class="op">=</span> <span class="st">"FSC-A : NA"</span>,</span>
<span>    useAllCells <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    useFixedLinearRange <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span><span class="op">+</span><span class="va">p2</span><span class="op">+</span><span class="va">p3</span></span></code></pre></div>
<p><img src="CytoPipelineGUI_files/figure-html/flowframe_viz_prog-1.png" width="900" height="300" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="visualization-of-scale-transformations">Visualization of scale transformations<a class="anchor" aria-label="anchor" href="#visualization-of-scale-transformations"></a>
</h3>
<p>Besides the flowFrame comparison tool, <code>CytoPipelineGUI</code>
provides another shiny app, which allows to interactively visualize and
manage the scale transformations that are generated as part of our
prep-processing pipelines.</p>
<p>If the shape of the scale transformations that were automatically set
by the chosen algorithm appears to be non satisfactory, it is possible,
using this shiny application, to manually adjust the parameters of the
transformation, and save the results in a RDS object. This object can
then be re-used in another pipeline instance.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 5. show scale transformations</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu">CytoPipelineGUI</span><span class="fu">::</span><span class="fu"><a href="../reference/ScaleTransformApp.html">ScaleTransformApp</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="va">workDir</span><span class="op">)</span>    </span>
<span><span class="op">}</span></span></code></pre></div>
<p>Note that here also, it is possible to obtain the visuals of the
scale transformations programmatically, although this is a bit more
evolved, as one has to use <code>CytoPipeline</code> functions for
this.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expName</span> <span class="op">&lt;-</span> <span class="st">"OMIP021_PeacoQC"</span></span>
<span><span class="va">pipL</span> <span class="op">&lt;-</span> <span class="fu">CytoPipeline</span><span class="fu">::</span><span class="fu"><a href="https://uclouvain-cbio.github.io/CytoPipeline/reference/interactingWithCytoPipelineCache.html" class="external-link">buildCytoPipelineFromCache</a></span><span class="op">(</span></span>
<span>    experimentName <span class="op">=</span> <span class="va">expName</span>,</span>
<span>    path <span class="op">=</span> <span class="va">workDir</span></span>
<span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">ff</span> <span class="op">&lt;-</span> <span class="fu">CytoPipeline</span><span class="fu">::</span><span class="fu"><a href="https://uclouvain-cbio.github.io/CytoPipeline/reference/inspectCytoPipelineObjects.html" class="external-link">getCytoPipelineFlowFrame</a></span><span class="op">(</span></span>
<span>        <span class="va">pipL</span>,</span>
<span>        path <span class="op">=</span> <span class="va">workDir</span>,</span>
<span>        whichQueue <span class="op">=</span> <span class="st">"scale transform"</span>,</span>
<span>        objectName <span class="op">=</span> <span class="st">"flowframe_aggregate_obj"</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plotScaleTransformedChannel.html">plotScaleTransformedChannel</a></span><span class="op">(</span></span>
<span>        <span class="va">ff</span>,</span>
<span>        channel <span class="op">=</span> <span class="st">"FSC-A"</span>,</span>
<span>        transfoType <span class="op">=</span> <span class="st">"linear"</span>,</span>
<span>        linA <span class="op">=</span> <span class="fl">0.0002</span>,</span>
<span>        linB <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plotScaleTransformedChannel.html">plotScaleTransformedChannel</a></span><span class="op">(</span></span>
<span>        <span class="va">ff</span>,</span>
<span>        channel <span class="op">=</span> <span class="st">"CD3"</span>,</span>
<span>        applyTransform <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>        transfoType <span class="op">=</span> <span class="st">"logicle"</span>,</span>
<span>        negDecades <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        width <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>        posDecades <span class="op">=</span> <span class="fl">4</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">p1</span><span class="op">+</span><span class="va">p2</span></span></code></pre></div>
<p><img src="CytoPipelineGUI_files/figure-html/scale_transform_viz_prog-1.png" width="600" height="300" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-information">Session information<a class="anchor" aria-label="anchor" href="#session-information"></a>
</h2>
<pre><code><span><span class="co">## R version 4.4.0 (2024-04-24)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.4 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span></span>
<span><span class="co">##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    </span></span>
<span><span class="co">##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 </span></span>
<span><span class="co">##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span></span>
<span><span class="co">## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] patchwork_1.2.0       CytoPipelineGUI_1.3.0 CytoPipeline_1.5.0   </span></span>
<span><span class="co">## [4] BiocStyle_2.33.0     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##   [1] DBI_1.2.2             gridExtra_2.3         rlang_1.1.3          </span></span>
<span><span class="co">##   [4] magrittr_2.0.3        clue_0.3-65           GetoptLong_1.0.5     </span></span>
<span><span class="co">##   [7] matrixStats_1.3.0     compiler_4.4.0        RSQLite_2.3.6        </span></span>
<span><span class="co">##  [10] png_0.1-8             systemfonts_1.0.6     vctrs_0.6.5          </span></span>
<span><span class="co">##  [13] reshape2_1.4.4        stringr_1.5.1         pkgconfig_2.0.3      </span></span>
<span><span class="co">##  [16] shape_1.4.6.1         crayon_1.5.2          fastmap_1.1.1        </span></span>
<span><span class="co">##  [19] dbplyr_2.5.0          labeling_0.4.3        utf8_1.2.4           </span></span>
<span><span class="co">##  [22] promises_1.3.0        ncdfFlow_2.51.0       rmarkdown_2.26.2     </span></span>
<span><span class="co">##  [25] graph_1.83.0          ragg_1.3.1            purrr_1.0.2          </span></span>
<span><span class="co">##  [28] bit_4.0.5             xfun_0.43             zlibbioc_1.51.0      </span></span>
<span><span class="co">##  [31] cachem_1.0.8          jsonlite_1.8.8        flowWorkspace_4.17.0 </span></span>
<span><span class="co">##  [34] blob_1.2.4            highr_0.10            later_1.3.2          </span></span>
<span><span class="co">##  [37] parallel_4.4.0        cluster_2.1.6         R6_2.5.1             </span></span>
<span><span class="co">##  [40] bslib_0.7.0           stringi_1.8.4         RColorBrewer_1.1-3   </span></span>
<span><span class="co">##  [43] jquerylib_0.1.4       Rcpp_1.0.12           bookdown_0.39        </span></span>
<span><span class="co">##  [46] iterators_1.0.14      knitr_1.46            zoo_1.8-12           </span></span>
<span><span class="co">##  [49] IRanges_2.39.0        flowCore_2.17.0       httpuv_1.6.15        </span></span>
<span><span class="co">##  [52] tidyselect_1.2.1      yaml_2.3.8            doParallel_1.0.17    </span></span>
<span><span class="co">##  [55] codetools_0.2-20      curl_5.2.1            lattice_0.22-6       </span></span>
<span><span class="co">##  [58] tibble_3.2.1          plyr_1.8.9            Biobase_2.65.0       </span></span>
<span><span class="co">##  [61] shiny_1.8.1.1         withr_3.0.0           evaluate_0.23        </span></span>
<span><span class="co">##  [64] desc_1.4.3            BiocFileCache_2.13.0  circlize_0.4.16      </span></span>
<span><span class="co">##  [67] pillar_1.9.0          BiocManager_1.30.23   filelock_1.0.3       </span></span>
<span><span class="co">##  [70] foreach_1.5.2         flowAI_1.35.0         stats4_4.4.0         </span></span>
<span><span class="co">##  [73] generics_0.1.3        diagram_1.6.5         S4Vectors_0.43.0     </span></span>
<span><span class="co">##  [76] ggplot2_3.5.1         munsell_0.5.1         ggcyto_1.33.0        </span></span>
<span><span class="co">##  [79] scales_1.3.0          xtable_1.8-4          PeacoQC_1.15.0       </span></span>
<span><span class="co">##  [82] changepoint_2.2.4     glue_1.7.0            tools_4.4.0          </span></span>
<span><span class="co">##  [85] hexbin_1.28.3         data.table_1.15.4     fs_1.6.4             </span></span>
<span><span class="co">##  [88] XML_3.99-0.16.1       grid_4.4.0            RProtoBufLib_2.17.0  </span></span>
<span><span class="co">##  [91] colorspace_2.1-0      cli_3.6.2             textshaping_0.3.7    </span></span>
<span><span class="co">##  [94] fansi_1.0.6           cytolib_2.17.0        ComplexHeatmap_2.21.0</span></span>
<span><span class="co">##  [97] dplyr_1.1.4           Rgraphviz_2.49.0      gtable_0.3.5         </span></span>
<span><span class="co">## [100] sass_0.4.9            digest_0.6.35         BiocGenerics_0.51.0  </span></span>
<span><span class="co">## [103] farver_2.1.2          rjson_0.2.21          htmlwidgets_1.6.4    </span></span>
<span><span class="co">## [106] memoise_2.0.1         htmltools_0.5.8.1     pkgdown_2.0.9.9000   </span></span>
<span><span class="co">## [109] lifecycle_1.0.4       httr_1.4.7            GlobalOptions_0.1.2  </span></span>
<span><span class="co">## [112] mime_0.12             bit64_4.0.5</span></span></code></pre>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Emmaneel2021-xy" class="csl-entry">
Emmaneel, Annelies, Katrien Quintelier, Dorine Sichien, Paulina
Rybakowska, Concepción Marañón, Marta E Alarcón-Riquelme, Gert Van
Isterdael, Sofie Van Gassen, and Yvan Saeys. 2021.
<span>“<span>PeacoQC</span>: <span>Peak-Based</span> Selection of High
Quality Cytometry Data.”</span> <em>Cytometry A</em>, September.
</div>
<div id="ref-Gherardin2014-pj" class="csl-entry">
Gherardin, Nicholas A, David S Ritchie, Dale I Godfrey, and Paul J
Neeson. 2014. <span>“<span>OMIP-021</span>: Simultaneous Quantification
of Human Conventional and Innate-Like t-Cell Subsets.”</span>
<em>Cytometry A</em> 85 (7): 573–75.
</div>
<div id="ref-Monaco2016-vo" class="csl-entry">
Monaco, Gianni, Hao Chen, Michael Poidinger, Jinmiao Chen, João Pedro de
Magalhães, and Anis Larbi. 2016. <span>“<span class="nocase">flowAI</span>: Automatic and Interactive Anomaly
Discerning Tools for Flow Cytometry Data.”</span>
<em>Bioinformatics</em> 32 (16): 2473–80.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Philippe Hauchamps, Laurent Gatto.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
